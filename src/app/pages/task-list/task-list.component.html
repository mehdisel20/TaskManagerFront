<div class="container mx-auto px-4 py-8 max-w-7xl">
  <!-- Header -->
  <div class="mb-8 flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-800 mb-1">Mes Tâches</h1>
      <p class="text-gray-500">Gérez votre travail efficacement</p>
    </div>
    <button (click)="onAdd()" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg shadow transition">
      <i class="fas fa-plus mr-2"></i>Nouvelle tâche
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="bg-white p-6 rounded-lg shadow text-center">
    <div class="animate-spin h-6 w-6 border-4 border-blue-400 border-t-transparent rounded-full mx-auto mb-3"></div>
    <p class="text-gray-600">Chargement des tâches...</p>
  </div>

  <!-- Erreur -->
  <div *ngIf="error" class="bg-red-100 border border-red-300 text-red-600 px-6 py-4 rounded-lg mb-6">
    <strong>Erreur :</strong> {{ error }}
  </div>

  <!-- Liste des tâches -->
  <div *ngIf="!loading && tasks.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let task of tasks; trackBy: trackByTaskId" class="bg-white p-5 rounded-lg shadow hover:shadow-md transition">
      <div class="flex justify-between items-start mb-3">
        <h3 class="text-xl font-semibold text-gray-800">{{ task.title }}</h3>
        <span [ngClass]="getStatusClass(task.status)" class="text-sm font-medium px-3 py-1 rounded-full border">
          <i [ngClass]="getStatusIcon(task.status)" class="mr-1"></i>{{ getStatusLabel(task.status) }}
        </span>
      </div>
      <p class="text-gray-600 mb-4 line-clamp-3">{{ task.description }}</p>
      <div class="text-sm text-gray-500 space-y-1 mb-5">
        <div><i class="fas fa-calendar-plus mr-1 text-blue-400"></i> Créée le : {{ task.createdDate | date: 'shortDate' }}</div>
        <div><i class="fas fa-calendar-times mr-1 text-purple-400"></i> Échéance : {{ task.dueDate | date: 'shortDate' }}</div>
      </div>
      <div class="flex gap-2">
        <button (click)="onEdit(task.id)" class="flex-1 py-2 px-4 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md">
          <i class="fas fa-edit mr-1"></i>Modifier
        </button>
        <button (click)="onDelete(task.id)" class="flex-1 py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded-md">
          <i class="fas fa-trash mr-1"></i>Supprimer
        </button>
      </div>
    </div>
  </div>

  <!-- Aucune tâche -->
  <div *ngIf="!loading && tasks.length === 0" class="bg-white p-12 text-center rounded-lg shadow mt-12">
    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <i class="fas fa-tasks text-gray-400 text-2xl"></i>
    </div>
    <h3 class="text-xl font-semibold text-gray-800 mb-2">Aucune tâche</h3>
    <p class="text-gray-500 mb-4">Commencez par créer une tâche</p>
    <button (click)="onAdd()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow">
      <i class="fas fa-plus mr-1"></i>Créer une tâche
    </button>
  </div>
</div>
